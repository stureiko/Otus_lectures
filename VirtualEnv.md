# Работа с вирутальным окружение

## Виртуальное окружение и какие есть инструменты

Виртуальное окружение – это изолированное пространство, в котором можно устанавливать и использовать определенные версии пакетов Python, не влияя на другие проекты или глобальную установку Python. Например, один проект может требовать Django 2.0, а другой — Django 1.0. Благодаря виртуальным окружениям, можно легко управлять такими зависимостями.

- **venv** — это модуль Python, который входит в стандартную библиотеку начиная с версии Python 3.3. Он предоставляет поддержку для создания легковесных «виртуальных окружений» с собственным интерпретатором Python, который может быть отличным от того, который используется глобально. Это очень полезно, когда вам нужно изолировать зависимости проекта.

- **pyvenv** — это устаревший инструмент, который был введен в Python 3.4 для создания виртуальных окружений. Он сейчас не рекомендуется к использованию, и его функциональность заменена модулем venv.

- **virtualenv** — это более старый инструмент, который также позволяет создавать виртуальные окружения. Он работает и на Python 2, и на Python 3. Отличие от venv состоит в том, что virtualenv не входит в стандартную библиотеку Python и должен быть установлен отдельно.

- **virtualenvwrapper** — это надстройка над virtualenv, которая добавляет некоторые удобные функции, такие как команды для переключения между виртуальными окружениями и удаления ненужных окружений.

- **pipenv** — это инструмент, который стремится объединить управление пакетами (pip) и управление виртуальными окружениями (venv). Он автоматически создает и управляет виртуальными окружениями для ваших проектов.

- **pyenv** — это инструмент, который позволяет управлять несколькими версиями Python. Он не создает виртуальные окружения, но очень полезен, когда вам нужно переключаться между разными версиями Python.

- **conda** - инструмент, поставляющийся в комплекте с Anaconda и хорошо приспособленный для управления сложными окружениями, характерными для ML проектов.

Дальше рассмотрим работу на примере двух вариантов venv и conda.

## venv

venv поставляется в составе Python 3 и уже есть у вас.

Создание виртуального окружения:

 ``` bash
venv project_name
 ```

Если вам для работы необходима определенная версия Python то это необходимо указать при создании виртуального окружения:

 ``` bash
venv project_name python==3.10
 ```

Данная команда создаст в текущем каталоге структуру виртуального окружения.

<span style="color:red">
Внимание! Вы только создали виртуальное окружение, но его необходимо активировать.
</span>

</br>
В Ubuntu вы можете получить ошибку. Это означает, что venv у вас не установлен. В этом случае выполните команду:

``` bash
sudo apt-get install python3-venv -y
```

### Активация виртуального окружения

#### Windows

``` bash
project_name\Scripts\activate
```

#### Linux / Mac

``` bash
source project_name/bin/activate
```

Теперь виртуальное окружение активированно. Как обозначение этого приглашение командной строки измениться. Теперь в началу в круглых скобках будет стоять название виртуального окружения, а нашем случае (project_name)

Теперь все пакеты, которые вы будете использовать - будут установлены в виртуальное окружение.

Для установки пользуйтесь обычным 

``` bash
pip install package_name
```

В частности, ранее установленный Jupyter работать сейчас не будет, его придется установить заново.

### Деактивация

Для того, чтобы выйти из виртуального окружения и вернуться в основныую среду необходимо выполнить команду:

```bash
deactivate
```

## Anaconda

Anaconda представляет собой специализированный дистрибутив Python "заточенный" для работы с ML. Помимо большого количества специальных пакетов он несет на борту и менеджер пакетов и виртуальных окружений `conda`.

В отличии от `pip` `conda` более "интеллектуально" подходит к управлению зависимостями. Она просматривает все цепочки зависимостей и пытается самостоятельно разрешить все конфликты.

Функционал `conda` достаточно богат, подробнее можно посмотреть здесь: https://docs.conda.io/projects/conda/en/stable/user-guide/tasks/manage-environments.html 

### Базовые команды

#### Создать виртуальное окружение

``` bash
conda create -n venv_name python==3.10
```

#### Активация

``` bash
conda activate venv_name
```

#### Деактивация

``` bash
conda deactivate
```
